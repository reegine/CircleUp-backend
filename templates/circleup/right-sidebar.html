{% with current=request.resolver_match.url_name %}
<style>
  .right-sidebar{flex:0 0 320px;width:320px;height:100vh;overflow:auto;background:#f9f9f9;border-left:1px solid #eee;padding:16px}
  .community-header{margin-bottom:12px}
  .community-cover{width:100%;height:150px;object-fit:cover;border-radius:12px;background:#eaeaea}
  .community-name{font-weight:700;font-size:18px;margin-top:10px}
  .community-stats{font-size:13px;color:#666;margin-top:4px}

  .sidebar-menu{list-style:none;margin:12px 0 8px 0;padding:0}
  .sidebar-menu-item{display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:10px;text-decoration:none;color:#333}
  .sidebar-menu-item:hover{background:#fff}
  .sidebar-menu-item.active{background:#fff3e0;border:1px solid #e59d2c}
  .sidebar-menu-item svg{width:18px;height:18px;flex:0 0 18px}

  .sidebar-section{margin-top:14px}
  .section-toggle{display:flex;align-items:center;gap:8px;cursor:pointer;color:#666;padding:8px 0}
  .section-toggle svg{width:16px;height:16px}
  #channels-list,#events-list{margin-top:6px}
  .channel-item,.event-item{display:flex;align-items:center;gap:8px;padding:8px 10px;border-radius:8px;text-decoration:none;color:#333}
  .channel-item:hover,.event-item:hover{background:#fff}
  .channel-item.active{background:#f5f5f5}
  .channel-item svg,.event-item svg{width:16px;height:16px;flex:0 0 16px}
</style>

<aside id="rightSidebar" class="right-sidebar">
  <!-- HEADER komunitas -->
  <div class="community-header">
    <img data-rs="image" class="community-cover" alt="Community banner">
    <div data-rs="name" class="community-name">Community</div>
    <div data-rs="counts" class="community-stats"></div>
  </div>

  <!-- MENU -->
  <ul class="sidebar-menu">
    <li>
      <a href="{% url 'about' %}" class="sidebar-menu-item {% if current == 'about' %}active{% endif %}">
        <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg>
        <span>About</span>
      </a>
    </li>
    <li>
      <a href="{% url 'event_info' %}" class="sidebar-menu-item {% if current == 'event_info' %}active{% endif %}">
        <svg viewBox="0 0 24 24"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/></svg>
        <span>Event Info</span>
      </a>
    </li>
    <li>
      <a href="{% url 'feeds' %}" class="sidebar-menu-item {% if current == 'feeds' %}active{% endif %}">
        <svg viewBox="0 0 24 24"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg>
        <span>Feeds</span>
      </a>
    </li>
    <li>
      <a href="{% url 'members' %}" class="sidebar-menu-item {% if current == 'members' %}active{% endif %}">
        <svg viewBox="0 0 24 24"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg>
        <span>Members</span>
      </a>
    </li>
  </ul>

  <!-- CHANNELS -->
  <div class="sidebar-section">
    <div class="section-toggle" onclick="toggleSection('channels')">
      <svg viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>
      <div class="sidebar-section-title">CHANNELS</div>
    </div>
    <div id="channels-list"><!-- diisi via JS --></div>
  </div>

  <!-- EVENTS -->
  <div class="sidebar-section">
    <div class="section-toggle" onclick="toggleSection('events')">
      <svg viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>
      <div class="sidebar-section-title">EVENTS</div>
    </div>
    <div id="events-list"><!-- diisi via JS --></div>
  </div>
</aside>
{% endwith %}

<script>
  function toggleSection(sectionId){
    const list = document.getElementById(sectionId + '-list');
    if (!list) return;
    list.style.display = (list.style.display === 'none' ? 'block' : 'none');
  }
</script>
